<!DOCTYPE html>
<html lang="sv">
<head>
<meta charset="UTF-8">
<title>Prioriteringsregler â€“ BasÃ¶vning</title>
<style>
  body { font-family: Arial; max-width: 600px; margin: auto; padding: 20px; }
  #task { font-size: 24px; font-weight: bold; margin-bottom: 10px; }
  .levels button { margin: 5px; padding: 8px 12px; font-size: 16px; }
</style>
</head>
<body>

<h1>TrÃ¤na pÃ¥ prioriteringsregler</h1>

<div class="levels">
  <button onclick="setLevel('blue')">ðŸ”µ BlÃ¥</button>
  <button onclick="setLevel('green')">ðŸŸ¢ GrÃ¶n</button>
  <button onclick="setLevel('yellow')">ðŸŸ¡ Gul</button>
  <button onclick="setLevel('red')">ðŸ”´ RÃ¶d</button>
</div>

<div id="task">â€”</div>

<input id="answer" placeholder="Skriv ditt svar">
<button onclick="checkAnswer()">Kontrollera</button>
<button onclick="newTask()">Ny uppgift</button>

<p id="feedback"></p>

<script>
// ====== Globalt tillstÃ¥nd ======
let currentLevel = "blue";
let correctAnswer = 0;

// ====== Slumptal ======
function r(min, max) {
  return Math.floor(Math.random() * (max - min + 1)) + min;
}

// ====== Generera uttryck per nivÃ¥ ======
function generateExpression(level) {

  if (level === "blue") {
    let a = r(1,10), b = r(1,10), c = r(1,10);
    return `${a} + ${b} * ${c}`;
  }

  if (level === "green") {
    let a = r(1,10), b = r(1,10), c = r(1,10);
    return `${a} * (${b} + ${c})`;
  }

  if (level === "yellow") {
    let a = r(1,10), b = r(1,10), c = r(1,10), d = r(1,10);
    return `(${a} + ${b}) * (${c} - ${d})`;
  }

  if (level === "red") {
    let a = r(1,10), b = r(1,10), c = r(1,10), d = r(1,10);
    return `${a} + (${b} * (${c} - ${d}))`;
  }
}

// ====== Evaluering (tillÃ¥ten i GitHub Pages) ======
function safeEval(expr) {
  return Function('"use strict"; return (' + expr + ')')();
}

// ====== Skapa ny uppgift ======
function newTask() {
  const expr = generateExpression(currentLevel);
  document.getElementById("task").innerText = expr;
  correctAnswer = safeEval(expr);
  document.getElementById("feedback").innerText = "";
  document.getElementById("answer").value = "";
}

// ====== Kolla svar ======
function checkAnswer() {
  const ans = Number(document.getElementById("answer").value);
  if (ans === correctAnswer) {
    document.getElementById("feedback").innerText = "RÃ¤tt! ðŸŽ‰";
  } else {
    document.getElementById("feedback").innerText = "Fel, prova igen!";
  }
}

// ====== Byt nivÃ¥ ======
function setLevel(level) {
  currentLevel = level;
  newTask();
}

// Starta fÃ¶rsta uppgiften
newTask();

</script>

</body>
</html>